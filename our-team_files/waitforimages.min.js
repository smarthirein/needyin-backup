/*
 * waitForImages 1.4
 * -----------------
 * Provides a callback when all images have loaded in your given selector.
 * http://www.alexanderdickson.com/
 *
 *
 * Copyright (c) 2011 Alex Dickson
 * Licensed under the MIT licenses.
 * See website for more info.
 *
 */
(function(b){b.waitForImages={hasImageProperties:["backgroundImage","listStyleImage","borderImage","borderCornerImage"]};b.expr[":"].uncached=function(a){if(!b(a).is('img[src!=""]'))return!1;var c=document.createElement("img");c.src=a.src;return!c.complete};b.fn.waitForImages=function(a,c,d){b.isPlainObject(a)&&(c=a.each,d=a.waitForAll,a=a.finished);a=a||b.noop;c=c||b.noop;d=!!d;if(!b.isFunction(a)||!b.isFunction(c))throw new TypeError("An invalid callback was supplied.");return this.each(function(){var f= b(this),e=[];if(d){var j=b.waitForImages.hasImageProperties||[],k=/url\((['"]?)(.*?)\1\)/g;f.find("*").each(function(){var a=b(this);a.is("img:uncached")&&e.push({src:a.attr("src"),element:a[0]});b.each(j,function(b,c){var d=a.css(c);if(!d)return true;for(var f;f=k.exec(d);)e.push({src:f[2],element:a[0]})})})}else f.find("img:uncached").each(function(){e.push({src:this.src,element:this})});var g=e.length,h=0;g==0&&a.call(f[0]);b.each(e,function(d,e){var i=new Image;b(i).bind("load.waitForImages error.waitForImages", function(b){h++;c.call(e.element,h,g,b.type=="load");if(h==g){a.call(f[0]);return false}});i.src=e.src})})}})(jQuery);